{% extends "base.html" %}
{% block title %}訓練結果列表{% endblock %}

{% block content %}
<h1>列表</h1>

<form method="get" class="row g-2 align-items-end mb-3">
  <div class="col-auto">
    <label>場地</label>
    <select name="terrain" class="form-select">
      <option value="">全部</option>
      {% for v in choices.terrain %}
        <option value="{{ v }}" {% if selected.terrain == v %}selected{% endif %}>{{ v }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-auto">
    <label>距離</label>
    <select name="distance" class="form-select">
      <option value="">全部</option>
      {% for v in choices.distance %}
        <option value="{{ v }}" {% if selected.distance == v %}selected{% endif %}>{{ v }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-auto">
    <label>跑法</label>
    <select name="strategy" class="form-select">
      <option value="">全部</option>
      {% for v in choices.strategy %}
        <option value="{{ v }}" {% if selected.strategy == v %}selected{% endif %}>{{ v }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-auto">
    <button class="btn btn-primary">篩選</button>
    <a href="{% url 'uma:result_list' %}" class="btn btn-outline-secondary">清除</a>
  </div>
</form>

<table class="table table-striped table-hover table-sm align-middle">
    <thead>
        <tr>
          <th>頭像</th>
      
          <th>
            分數
            <a href="?{{ request.GET.urlencode }}&sort=score">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-score">▼</a>
          </th>
      
          <th>
            速
            <a href="?{{ request.GET.urlencode }}&sort=speed">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-speed">▼</a>
          </th>
      
          <th>
            耐
            <a href="?{{ request.GET.urlencode }}&sort=stamina">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-stamina">▼</a>
          </th>
      
          <th>
            力
            <a href="?{{ request.GET.urlencode }}&sort=power">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-power">▼</a>
          </th>
      
          <th>
            根
            <a href="?{{ request.GET.urlencode }}&sort=guts">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-guts">▼</a>
          </th>
      
          <th>
            智
            <a href="?{{ request.GET.urlencode }}&sort=intelligence">▲</a>
            <a href="?{{ request.GET.urlencode }}&sort=-intelligence">▼</a>
          </th>
      
          <th>資質</th>
        </tr>
      </thead>
      

  <tbody>
    {% for r in results %}
      <tr>
        <td style="width:70px;">
          {% if r.portrait_crop %}
            <a href="{% url 'uma:result_edit' r.pk %}">
                <img src="{{ r.portrait_crop.url }}" style="width:60px; height:60px; object-fit:cover; border-radius:6px;">
            </a>
          {% else %}
            —
          {% endif %}
        </td>

        <td>
            <a href="{% url 'uma:result_edit' r.pk %}" style="text-decoration:none;">
              <strong>{{ r.score }}</strong>
            </a>
          </td>          
        <td>{{ r.speed }}</td>
        <td>{{ r.stamina }}</td>
        <td>{{ r.power }}</td>
        <td>{{ r.guts }}</td>
        <td>{{ r.intelligence }}</td>

        <td style="font-size:12px;">
          {{ r.terrain|default:"—" }} /
          {{ r.distance|default:"—" }} /
          {{ r.strategy|default:"—" }}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="9">沒有資料</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
