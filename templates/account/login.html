{% extends "base.html" %}
{% load i18n %}
{% load account socialaccount %}

{% block title %}登入 | UMA Record{% endblock %}

{% block content %}
<style>
  .auth-wrap{
    min-height: calc(100vh - 120px);
    display:flex; align-items:center; justify-content:center;
    padding:24px 12px;
    background: #f4f6fb;
  }
  .auth-card{
    width: min(520px, 92vw);
    background:#fff;
    border-radius:18px;
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
    padding: 26px 26px 22px;
  }
  .auth-title{
    display:flex; align-items:center; gap:10px;
    font-weight:800; font-size:24px;
    margin-bottom:6px;
  }
  .auth-sub{ color:#6b7280; margin-bottom:18px; }
  .divider{
    display:flex; align-items:center; gap:12px;
    color:#9aa3af; font-size:13px;
    margin: 16px 0;
  }
  .divider::before,.divider::after{
    content:""; height:1px; background:#e5e7eb; flex:1;
  }
  .google-btn{
    width:100%;
    display:flex; align-items:center; justify-content:center; gap:10px;
    border:1px solid #e5e7eb;
    border-radius:999px;
    padding: 11px 12px;
    background:#fff;
    font-weight:700;
    text-decoration:none;
    color:#111827;
  }
  .google-btn:hover{ background:#f9fafb; }
  .gmark{
    width:22px; height:22px;
    display:inline-flex; align-items:center; justify-content:center;
    border-radius:6px;
    font-weight:900;
  }
  .form-control{ border-radius:12px; }
  .btn-primary{ border-radius:12px; font-weight:700; }
  .hint{ color:#6b7280; font-size:13px; }
</style>

<div class="auth-wrap">
  <div class="auth-card">

    <div class="auth-title">
      <span class="gmark">G</span>
      <span>Sign in</span>
    </div>
    <div class="auth-sub">Use your account to continue</div>

    {# ✅ Google 登入 #}
    <a class="google-btn" href="{% provider_login_url 'google' %}">
      <span class="gmark">G</span>
      <span>Continue with Google</span>
    </a>

    <div class="divider">or</div>

    {# ✅ 一般帳密登入（用你原本測試帳號登入就是靠這個） #}
    <form method="post" action="{% url 'account_login' %}">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <div class="mb-3">
        <label class="form-label fw-bold">帳號 / Email</label>
        <input class="form-control" type="text" name="login" autocomplete="username" required>
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">密碼</label>
        <input class="form-control" type="password" name="password" autocomplete="current-password" required>
      </div>

      {% if redirect_field_value %}
        <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
      {% endif %}

      <button class="btn btn-primary w-100" type="submit">登入</button>

      <div class="d-flex justify-content-between mt-3">
        <a class="hint" href="{% url 'account_reset_password' %}">忘記密碼</a>
        <a class="hint" href="{% url 'account_signup' %}">建立新帳號</a>
      </div>

      <div class="hint mt-3">
        Not your computer? Use Guest mode to sign in privately.
      </div>
    </form>

  </div>
</div>
{% endblock %}
